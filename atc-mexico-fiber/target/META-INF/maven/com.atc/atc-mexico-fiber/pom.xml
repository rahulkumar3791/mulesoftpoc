<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
	<modelVersion>4.0.0</modelVersion>
        
	<groupId>com.atc</groupId>
	<artifactId>atc-mexico-fiber</artifactId>
    <version>1.0.87-SNAPSHOT</version>
    <packaging>mule-application</packaging>
	<name>atc-mexico-fiber</name>

    <properties>
        <ojdbc6.version>11.2.0.3</ojdbc6.version>
		<mule.http.connector.version>1.3.2</mule.http.connector.version>
		<mule.sockets.connector.version>1.1.2</mule.sockets.connector.version>
		<mule.db.connector.version>1.4.3</mule.db.connector.version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
        <spring.security.version>5.1.0.RELEASE</spring.security.version>
        <spring.version>5.1.0.RELEASE</spring.version>
        <app.runtime>4.2.1</app.runtime>
        <mule.maven.plugin.version>3.3.5</mule.maven.plugin.version>
        <munit.version>2.1.4</munit.version>
        <properties.plugin.version>1.0.0</properties.plugin.version>
        <mule.spring.module>1.3.0</mule.spring.module>
    </properties>
    <build>
        <plugins>
        	<plugin>
				<groupId>org.mule.tools.maven</groupId>
				<artifactId>mule-maven-plugin</artifactId>
				<version>${mule.maven.plugin.version}</version>
				<extensions>true</extensions>
				<configuration>
					<sharedLibraries>
                         <sharedLibrary>
                             <groupId>org.springframework</groupId>
                             <artifactId>spring-core</artifactId>
                         </sharedLibrary>
                         <sharedLibrary>
                             <groupId>org.springframework</groupId>
                             <artifactId>spring-beans</artifactId>
                         </sharedLibrary>
                         <sharedLibrary>
                             <groupId>org.springframework</groupId>
                             <artifactId>spring-context</artifactId>
                         </sharedLibrary>
                         <sharedLibrary>
                             <groupId>org.springframework</groupId>
                            <artifactId>spring-aop</artifactId>
                         </sharedLibrary>
                         <sharedLibrary>
                             <groupId>org.springframework.security</groupId>
                             <artifactId>spring-security-core</artifactId>
                         </sharedLibrary>
                         <sharedLibrary>
                             <groupId>org.springframework.security</groupId>
                             <artifactId>spring-security-config</artifactId>
                         </sharedLibrary>
                         <sharedLibrary>
                             <groupId>com.oracle</groupId>
            				 <artifactId>ojdbc6</artifactId>
                         </sharedLibrary>
                         <sharedLibrary>
                         	<groupId>org.springframework</groupId>
            			 	<artifactId>spring-aop</artifactId>
            			 </sharedLibrary>
                     <sharedLibrary>
                            <groupId>com.microsoft.sqlserver</groupId>
                            <artifactId>mssql-jdbc</artifactId>
                        </sharedLibrary>
                    </sharedLibraries>
					<classifier>mule-application</classifier>
				</configuration>
			</plugin>
            <plugin>
                <groupId>com.mulesoft.munit.tools</groupId>
                <artifactId>munit-maven-plugin</artifactId>
                <version>${munit.version}</version>
                <executions>
                    <execution>
                        <id>test</id>
                        <phase>test</phase>
                        <goals>
                            <goal>test</goal>
                            <goal>coverage-report</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <coverage>
                        <runCoverage>true</runCoverage>
                        <formats>
                            <format>console</format>
                            <format>html</format>
                        </formats>
                    </coverage>
                </configuration>
            </plugin>
		</plugins>
	</build>

	<dependencies>
        <dependency>
            <groupId>org.mule.connectors</groupId>
            <artifactId>mule-http-connector</artifactId>
            <version>${mule.http.connector.version}</version>
            <classifier>mule-plugin</classifier>
            <!-- <scope>provided</scope> -->
        </dependency>
        <dependency>
            <groupId>org.mule.connectors</groupId>
            <artifactId>mule-sockets-connector</artifactId>
            <version>${mule.sockets.connector.version}</version>
            <classifier>mule-plugin</classifier>
            <!-- <scope>provided</scope> -->
        </dependency>
    	
    	<dependency>
            <groupId>com.oracle</groupId>
            <artifactId>ojdbc6</artifactId>
            <version>${ojdbc6.version}</version>
        </dependency>
    	<dependency>
            <groupId>org.mule.connectors</groupId>
            <artifactId>mule-db-connector</artifactId>
            <version>${mule.db.connector.version}</version>
            <classifier>mule-plugin</classifier>
        </dependency>
        
        <!-- Spring -->
        <dependency>
            <groupId>org.mule.modules</groupId>
            <artifactId>mule-spring-module</artifactId>
            <version>${mule.spring.module}</version>
            <classifier>mule-plugin</classifier>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${spring.security.version}</version>
        </dependency>
    	<dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${spring.security.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.security.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${spring.version}</version>
        </dependency>
        
        <!-- Munit -->
    	<dependency>
            <groupId>com.mulesoft.munit</groupId>
            <artifactId>munit-runner</artifactId>
            <version>${munit.version}</version>
            <classifier>mule-plugin</classifier>
            <scope>test</scope>
        </dependency>	<dependency>
            <groupId>com.mulesoft.munit</groupId>
            <artifactId>munit-tools</artifactId>
            <version>${munit.version}</version>
            <classifier>mule-plugin</classifier>
            <scope>test</scope>
        </dependency>
    	<dependency>
            <groupId>com.microsoft.sqlserver</groupId>
            <artifactId>mssql-jdbc</artifactId>
            <version>6.2.2.jre8</version>
        </dependency>
    </dependencies>
    
    
     <repositories>
		<repository>
			<id>anypoint-exchange</id>
			<name>Anypoint Exchange</name>
			<url>https://maven.anypoint.mulesoft.com/api/v1/maven</url>
			<layout>default</layout>
		</repository>
		<repository>
			<id>mulesoft-releases</id>
			<name>MuleSoft Releases Repository</name>
			<url>https://repository.mulesoft.org/releases/</url>
			<layout>default</layout>
		</repository>
	</repositories>
	<pluginRepositories>
		<pluginRepository>
			<id>mulesoft-releases</id>
			<name>mulesoft release repository</name>
			<layout>default</layout>
			<url>https://repository.mulesoft.org/releases/</url>
			<snapshots>
				<enabled>false</enabled>
			</snapshots>
		</pluginRepository>
	</pluginRepositories>
    
    
    
    <!-- Profile Lists -->
    <profiles>
        <profile>
            <id>mdeploy</id>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>properties-maven-plugin</artifactId>
                        <version>${properties.plugin.version}</version>
                        <executions>
                          <execution>
                            <phase>validate</phase>
                            <goals>
                              <goal>read-project-properties</goal>
                            </goals>
                            <configuration>
                              <files>
                                <file>environment.properties</file>
                                <file>src/main/resources/resources-${env.ENV}.properties</file>
                              </files>
                            </configuration>
                          </execution>
                        </executions>
                      </plugin>
                  <plugin>
                        <groupId>org.mule.tools.maven</groupId>
                        <artifactId>mule-maven-plugin</artifactId>
                        <version>${mule.maven.plugin.version}</version>
                        <configuration>
                            <cloudHubDeployment>
                                <uri>${mule-cloudhub-url}</uri>
                                <muleVersion>${app.runtime}</muleVersion>
                                <username>${env.MULE_USERNAME}</username>
								<password>${env.MULE_PASSWORD}</password>
								<environment>${env.CLOUDHUB_ENV}</environment>
                                <workers>${mule-workers}</workers>
                                <workerType>${mule-workers-type}</workerType>
                                <region>${mule-region}</region>
                                <businessGroup>${mule-business-group}</businessGroup>
                                <artifact>${basedir}/target/${project.artifactId}-${project.version}-mule-application.jar</artifact>
                                <applicationName>${project.artifactId}-${env.ENV}</applicationName>
                                <properties>
                                    <anypoint.platform.analytics_base_uri>${mule-analytics-base-uri}</anypoint.platform.analytics_base_uri>
									<anypoint.platform.coreservice_base_uri>${mule-coreservice-base-uri}</anypoint.platform.coreservice_base_uri>
									<anypoint.platform.client_id>${client-id}</anypoint.platform.client_id>
									<anypoint.platform.client_secret>${client-secret}</anypoint.platform.client_secret>
									<anypoint.platform.platform_base_uri>${mule-platform-base-uri}</anypoint.platform.platform_base_uri>
									<anypoint.platform.contracts_base_uri>${mule-contracts-base-uri}</anypoint.platform.contracts_base_uri>
                                    <!--Resource Properties-->
                                    <prop.env>${env.ENV}</prop.env>
                                    <https.username>${env.HTTPS_USERNAME}</https.username>
									<https.password>${env.HTTPS_PASSWORD}</https.password>
									<cm.db.password>${env.CM_DB_PASSWORD} </cm.db.password>
									<sam.db.password>${env.SAM_DB_PASSWORD}</sam.db.password>
									<email.audit.db.password>${env.EMAIL_AUDIT_DB_PASSWORD}</email.audit.db.password>
									<edificio.cron.enable>${env.EDIFICO_CRON_ENABLE}</edificio.cron.enable>
									<sitios.cron.enable>${env.SITIOS_CRON_ENABLE}</sitios.cron.enable>
									
									<smtp.to.operations>${smtp.to.operations}</smtp.to.operations>
									<tls.key.password>${tls.key.password}</tls.key.password>
									<tls.store.password>${tls.store.password}</tls.store.password>
									<edificio.bulk.update.batch.size>${edificio.bulk.update.batch.size}</edificio.bulk.update.batch.size>
									<sitios.bulk.update.batch.size>${sitios.bulk.update.batch.size}</sitios.bulk.update.batch.size>
									<cm.db.host>${cm.db.host}</cm.db.host>
									<cm.db.port>${cm.db.port}</cm.db.port>
									<cm.db.user>${cm.db.user}</cm.db.user>
									<cm.db.service.name>${cm.db.service.name}</cm.db.service.name>
									<sam.db.host>${sam.db.host}</sam.db.host>
									<sam.db.port>${sam.db.port}</sam.db.port>
									<sam.db.user>${sam.db.user}</sam.db.user>
									<sam.db.name>${sam.db.name}</sam.db.name>
									<email.audit.db.host>${email.audit.db.host}</email.audit.db.host>
									<email.audit.db.port>${email.audit.db.port}</email.audit.db.port>
									<email.audit.db.user>${email.audit.db.user}</email.audit.db.user>
									<email.audit.db.instance>${email.audit.db.instance}</email.audit.db.instance>
									<mail.enable>${mail.enable}</mail.enable>							 	
									
									
                                </properties>
                            </cloudHubDeployment>
                        </configuration>
                    </plugin> 
                </plugins>
            </build>
        </profile>
    </profiles>
</project>
