<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns:json="http://www.mulesoft.org/schema/mule/json" xmlns:db="http://www.mulesoft.org/schema/mule/db"
	xmlns:vm="http://www.mulesoft.org/schema/mule/vm" xmlns:smtp="http://www.mulesoft.org/schema/mule/smtp"
	xmlns:tracking="http://www.mulesoft.org/schema/mule/ee/tracking"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:smtps="http://www.mulesoft.org/schema/mule/smtps" xmlns:mulexml="http://www.mulesoft.org/schema/mule/xml"
	xmlns:data-mapper="http://www.mulesoft.org/schema/mule/ee/data-mapper"
	xmlns:https="http://www.mulesoft.org/schema/mule/https" xmlns:cxf="http://www.mulesoft.org/schema/mule/cxf"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:mule-ss="http://www.mulesoft.org/schema/mule/spring-security"
	xmlns:spring="http://www.springframework.org/schema/beans"
	xsi:schemaLocation="http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd
http://www.mulesoft.org/schema/mule/vm http://www.mulesoft.org/schema/mule/vm/current/mule-vm.xsd
http://www.mulesoft.org/schema/mule/smtp http://www.mulesoft.org/schema/mule/smtp/current/mule-smtp.xsd
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/https http://www.mulesoft.org/schema/mule/https/current/mule-https.xsd
http://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/current/mule-cxf.xsd
http://www.mulesoft.org/schema/mule/ee/jdbc http://www.mulesoft.org/schema/mule/ee/jdbc/current/mule-jdbc-ee.xsd
http://www.mulesoft.org/schema/mule/xml http://www.mulesoft.org/schema/mule/xml/current/mule-xml.xsd
http://www.mulesoft.org/schema/mule/ee/data-mapper http://www.mulesoft.org/schema/mule/ee/data-mapper/current/mule-data-mapper.xsd
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd
http://www.mulesoft.org/schema/mule/ee/tracking http://www.mulesoft.org/schema/mule/ee/tracking/current/mule-tracking-ee.xsd
http://www.mulesoft.org/schema/mule/spring-security http://www.mulesoft.org/schema/mule/spring-security/current/mule-spring-security.xsd
http://www.mulesoft.org/schema/mule/db http://www.mulesoft.org/schema/mule/db/current/mule-db.xsd">

	<flow name="tarantula-getUpdateStatusRequisitionAndMoveOrderService">
		<http:listener config-ref="HTTP_Listener_Configuration"
			path="api/soap/getRequisitionAndMoveOrder" doc:name="Get Requisition And Move Order Request" />
		<mule-ss:http-security-filter realm="mule-realm" />
		<!-- <http:inbound-endpoint address="http://10.200.75.116:8082/api/soap/getRequisitionAndMoveOrder" 
			exchange-pattern="request-response" doc:name="Tarantula Request" /> -->
		<set-variable variableName="requestTime" value="#[server.dateTime]"
			doc:name="Set Request Time" />
		<logger
			message="[#[message.inboundProperties['X-Forwarded-For']]][GetOrders][RequestTime : #[requestTime]]"
			level="INFO" doc:name="Log IP And Request Time" />
		<cxf:jaxws-service
			serviceClass="com.atc.esb.tarantula.GetRequisitionAndMoveOrderStatus"
			doc:name="Get Requisition And Move Order Data" />

		<flow-ref name="tarantula-getRequisitionAndMoveOrderFlow"
			doc:name="Call gam-getRequisitionAndMoveOrderFlow" />
		<logger
			message="[#[message.inboundProperties['X-Forwarded-For']]][GetOrders][ResponseTime : #[responseTime]]"
			level="INFO" doc:name="Response Time" />

	</flow>

	<flow name="tarantula-inboundService">
		<http:listener config-ref="HTTP_Listener_Configuration"
			path="api/soap/setOrders" doc:name="Insert Order Request" />
		<mule-ss:http-security-filter realm="mule-realm" />
		<!-- <http:inbound-endpoint address="http://10.200.75.116:8082/api/soap/setOrders" 
			exchange-pattern="request-response" doc:name="Tarantula Request" /> -->
		<set-variable variableName="requestTime" value="#[server.dateTime]"
			doc:name="Set Request Time" />
		<logger
			message="[#[message.inboundProperties['X-Forwarded-For']]][SetOrders][RequestTime : #[requestTime]]"
			level="INFO" doc:name="Log IP And Request Time" />

		<cxf:jaxws-service serviceClass="com.atc.esb.tarantula.GetRequisitionMoveOrders"
			doc:name="Receive Order Data" />

		<flow-ref name="tarantula-InsertOrdersFlow" doc:name="Call tarantula-InsertOrdersFlow" />
		<logger
			message="[#[message.inboundProperties['X-Forwarded-For']]][SetOrders][ResponseTime : #[responseTime]]"
			level="INFO" doc:name="Response Time" />

	</flow>

	<flow name="ebs-getLandLeaseData">
		<http:listener config-ref="HTTP_Listener_Configuration"
			path="api/soap/getLandLeaseData" doc:name="Get Land Lease Data" />
		<mule-ss:http-security-filter realm="mule-realm" />
		<!-- <http:inbound-endpoint address="http://10.200.75.116:8082/api/soap/getLandLeaseData" 
			exchange-pattern="request-response" doc:name="Tarantula Request" /> -->
		<set-variable variableName="requestTime" value="#[server.dateTime]"
			doc:name="Set Request Time" />
		<logger
			message="[#[message.inboundProperties['X-Forwarded-For']]][GetLandLeaseData][RequestTime : #[requestTime]]"
			level="INFO" doc:name="Log IP And Request Time" />

		<cxf:jaxws-service serviceClass="com.atc.ebs.lease.land.GetLandLeaseData"
			doc:name="Get Land Lease Data" />

		<flow-ref name="ebs-getLandLeaseDataFlow" doc:name="Call tarantula-getLandLeaseDataFlow" />
		<logger
			message="[#[message.inboundProperties['X-Forwarded-For']]][GetLandLeaseData][ResponseTime : #[responseTime]]"
			level="INFO" doc:name="Response Time" />

	</flow>

	<flow name="ebs-getTenantLeaseData">
		<http:listener config-ref="HTTP_Listener_Configuration"
			path="api/soap/getTenantLeaseData" doc:name="Get Tenant Lease Data" />
		<mule-ss:http-security-filter realm="mule-realm" />
		<!-- <http:inbound-endpoint address="http://10.200.75.116:8082/api/soap/getTenantLeaseData" 
			exchange-pattern="request-response" doc:name="Tarantula Request" /> -->
		<set-variable variableName="requestTime" value="#[server.dateTime]"
			doc:name="Set Request Time" />
		<logger
			message="[#[message.inboundProperties['X-Forwarded-For']]][GetTenantLeaseData][RequestTime : #[requestTime]]"
			level="INFO" doc:name="Log IP And Request Time" />

		<cxf:jaxws-service serviceClass="com.atc.ebs.lease.tenant.GetTenantLeaseData"
			doc:name="Get Tenant Lease Data" />

		<flow-ref name="ebs-getTenantLeaseDataFlow" doc:name="Call tarantula-getTenantLeaseDataFlow" />
		<logger
			message="[#[message.inboundProperties['X-Forwarded-For']]][GetTenantLeaseData][ResponseTime : #[responseTime]]"
			level="INFO" doc:name="Response Time" />

	</flow>

	<flow name="ebs-getLandLeaseRentData">
		<http:listener config-ref="HTTP_Listener_Configuration"
			path="api/soap/getLandLeaseRentData" doc:name="Get Land Lease Rent Data" />
		<mule-ss:http-security-filter realm="mule-realm" />
		<!-- <http:inbound-endpoint address="http://10.200.75.116:8082/api/soap/getLandLeaseRentData" 
			exchange-pattern="request-response" doc:name="Tarantula Request" /> -->
		<set-variable variableName="requestTime" value="#[server.dateTime]"
			doc:name="Set Request Time" />
		<logger
			message="[#[message.inboundProperties['X-Forwarded-For']]][GetLandLeaseRentData][RequestTime : #[requestTime]]"
			level="INFO" doc:name="Log IP And Request Time" />

		<cxf:jaxws-service serviceClass="com.atc.ebs.lease.land.GetLandLeaseRentData"
			doc:name="Get Land Lease Rent Data" />

		<flow-ref name="ebs-getLandLeaseRentDataFlow" doc:name="Call tarantula-getLandLeaseTentDataFlow" />
		<logger
			message="[#[message.inboundProperties['X-Forwarded-For']]][GetLandLeaseRentData][ResponseTime : #[responseTime]]"
			level="INFO" doc:name="Response Time" />
	</flow>

	<flow name="vendorEndpointFlow">
		<http:listener config-ref="HTTP_Listener_Configuration"
			path="api/soap/tarantulaService" doc:name="Get Vendor Data" />
		<mule-ss:http-security-filter realm="mule-realm" />
		<!-- <http:inbound-endpoint address="http://0.0.0.0:8088/api/soap/tarantulaService" 
			exchange-pattern="request-response" doc:name="Tarantula Request" /> -->
		<set-variable variableName="requestTime" value="#[server.dateTime]"
			doc:name="Set Request Time" />
		<logger
			message="[#[message.inboundProperties['X-Forwarded-For']]][VendorDataExtract][RequestTime : #[requestTime]]"
			level="INFO" doc:name="Log IP And Request Time" />
		<cxf:jaxws-service serviceClass="com.atc.ebs.vendor.GetVendorData"
			doc:name="Get Vendor Data" />

		<flow-ref name="vendorDataExtractFlow" doc:name="Call vendorDataExtractFlow" />
		<logger
			message="[#[message.inboundProperties['X-Forwarded-For']]][VendorDataExtract][ResponseTime : #[responseTime]]"
			level="INFO" doc:name="Response Time" />

	</flow>
</mule>