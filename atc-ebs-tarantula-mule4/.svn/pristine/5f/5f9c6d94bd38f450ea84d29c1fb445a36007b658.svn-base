<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:jdbc-ee="http://www.mulesoft.org/schema/mule/ee/jdbc"
	xmlns:db="http://www.mulesoft.org/schema/mule/db" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:spring="http://www.springframework.org/schema/beans" version="EE-3.5.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/db http://www.mulesoft.org/schema/mule/db/current/mule-db.xsd
http://www.mulesoft.org/schema/mule/ee/jdbc http://www.mulesoft.org/schema/mule/ee/jdbc/current/mule-jdbc-ee.xsd">
	<db:generic-config name="TarantulaDatabase" doc:name="Tarantula Database"
		dataSource-ref="DataSource" />
	<db:oracle-config name="VendordataLogic" doc:name="Oracle Configuration"
		dataSource-ref="DataSource" />

	<spring:beans>
		<spring:bean name="DataSource"
			class="org.enhydra.jdbc.standard.StandardDataSource">
			<spring:property name="driverName"
				value="oracle.jdbc.driver.OracleDriver" />
			<spring:property name="url"
				value="jdbc:oracle:thin:@${jdbc.source.server.host}:${jdbc.source.server.port}:${jdbc.source.server.instance}" />
			<spring:property name="user" value="${jdbc.source.server.user}" />
			<spring:property name="password"
				value="${jdbc.source.server.password}" />
		</spring:bean>
	</spring:beans>

	<jdbc-ee:connector name="Database" dataSource-ref="DataSource"
		handleOutputResultSets="true">
		<!-- <jdbc-ee:query key="getLandLeaseData" value="call #[data;resultSet;out] 
			:= XXATC.ATC_PN_IND_TT_UTILS_PKG.GET_DATA(#[payload])"/> -->
		<jdbc-ee:query key="getLandLeaseData"
			value="call #[data;resultSet;out] := XXATC.ATC_PN_IND_TT_UTILS_PKG.GET_LAND_LEASE_DATA(#[payload])" />
		<jdbc-ee:query key="getTenantLeaseData"
			value="call #[data;resultSet;out] := XXATC.ATC_PN_IND_TT_UTILS_PKG.GET_TENANT_LEASE_DATA(#[payload[0]],#[payload[1]],#[payload[2]],#[payload[3]],#[payload[4]],#[payload[5]],#[payload[6]],#[payload[7]],#[payload[8]],#[payload[9]],#[payload[10]],#[payload[11]],#[payload[12]],#[payload[13]],#[payload[14]],#[payload[15]])" />
		<jdbc-ee:query key="getLandLeaseRentData"
			value="call #[data;resultSet;out] := XXATC.ATC_PN_IND_TT_UTILS_PKG.GET_LAND_RENT_HIST(#[payload])" />
	</jdbc-ee:connector>
</mule>
